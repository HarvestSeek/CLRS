<!-- Fix MathJax rendering on iOS Safari due to rendering long numbers as phone numbers. -->




<!doctype html>
<html lang="en" class="no-js">
  <head>
    
	
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
	<meta name="format-detection" content="telephone=no">

    
      
        <title>hit bricks - Learning Notes of Algorithm</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#4caf50">
      
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../css/katex.css">
    
      <link rel="stylesheet" href="../../../css/wab.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-117404761-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="green" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Learning Notes of Algorithm" class="md-header-nav__button md-logo">
          
            <i class="md-icon">import_contacts</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Learning Notes of Algorithm
            </span>
            <span class="md-header-nav__topic">
              
                hit bricks
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../.." title="Basis" class="md-tabs__link">
          Basis
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../color/" title="Problem Sets" class="md-tabs__link md-tabs__link--active">
          Problem Sets
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Learning Notes of Algorithm" class="md-nav__button md-logo">
      
        <i class="md-icon">import_contacts</i>
      
    </a>
    Learning Notes of Algorithm
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Basis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Basis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../.." title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-2" type="checkbox" id="nav-1-2">
    
    <label class="md-nav__link" for="nav-1-2">
      I Foundations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-1-2">
        I Foundations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../1-Fundamentals/1.1/" title="1.analysis" class="md-nav__link">
      1.analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../1-Fundamentals/1.2/" title="2.asymptotic complexity" class="md-nav__link">
      2.asymptotic complexity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../1-Fundamentals/1.3/" title="3.solving recurrences" class="md-nav__link">
      3.solving recurrences
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-3" type="checkbox" id="nav-1-3">
    
    <label class="md-nav__link" for="nav-1-3">
      II Sorting and Order Statistics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-1-3">
        II Sorting and Order Statistics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../2-sort/2.1/" title="1.Simple Sort" class="md-nav__link">
      1.Simple Sort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../2-sort/2.2/" title="2.Mergesort" class="md-nav__link">
      2.Mergesort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../2-sort/2.3/" title="3.Heap and Heapsort" class="md-nav__link">
      3.Heap and Heapsort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../2-sort/2.4/" title="4.Quicksort" class="md-nav__link">
      4.Quicksort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../2-sort/2.5/" title="5.Sorting in linear time" class="md-nav__link">
      5.Sorting in linear time
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../2-sort/2.6/" title="6.Median and order statictics" class="md-nav__link">
      6.Median and order statictics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-4" type="checkbox" id="nav-1-4">
    
    <label class="md-nav__link" for="nav-1-4">
      III Data Structures
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-1-4">
        III Data Structures
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../3-DataStructures/3.1/" title="1.Elementary data structures" class="md-nav__link">
      1.Elementary data structures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../3-DataStructures/3.2/" title="2.Hash tables" class="md-nav__link">
      2.Hash tables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../3-DataStructures/3.3/" title="3.Binary search trees" class="md-nav__link">
      3.Binary search trees
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../3-DataStructures/3.4/" title="4.Red-Black trees" class="md-nav__link">
      4.Red-Black trees
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../3-DataStructures/3.5/" title="5.AVL trees" class="md-nav__link">
      5.AVL trees
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../3-DataStructures/3.6/" title="6.Interval trees" class="md-nav__link">
      6.Interval trees
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../3-DataStructures/3.7/" title="7.Segment trees" class="md-nav__link">
      7.Segment trees
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../3-DataStructures/3.8/" title="8.Disjoint-Set" class="md-nav__link">
      8.Disjoint-Set
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5" type="checkbox" id="nav-1-5">
    
    <label class="md-nav__link" for="nav-1-5">
      IV Advanced Design And Analysis &emsp;Techniques
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-1-5">
        IV Advanced Design And Analysis &emsp;Techniques
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../4-Advanced/dp/" title="1.Dynamic Programming" class="md-nav__link">
      1.Dynamic Programming
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Problem Sets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Problem Sets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../color/" title="Color" class="md-nav__link">
      Color
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Interval Tree
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Interval Tree
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../intervaltree/1/" title="rect area" class="md-nav__link">
      rect area
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3" checked>
    
    <label class="md-nav__link" for="nav-2-3">
      Union Find Set
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Union Find Set
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../eg/" title="some examples" class="md-nav__link">
      some examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1/" title="longest consec seq" class="md-nav__link">
      longest consec seq
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        hit bricks
      </label>
    
    <a href="./" title="hit bricks" class="md-nav__link md-nav__link--active">
      hit bricks
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="解题步骤" class="md-nav__link">
    解题步骤
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      DP
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        DP
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../dp/editdistance/" title="edit distance" class="md-nav__link">
      edit distance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dp/maxsubarray/" title="maximum subarray" class="md-nav__link">
      maximum subarray
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dp/rematch/" title="expression matching" class="md-nav__link">
      expression matching
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dp/longestvalidparentheses/" title="longest valid parentheses" class="md-nav__link">
      longest valid parentheses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dp/maxrect/" title="maximal rectangle" class="md-nav__link">
      maximal rectangle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dp/scramblestr/" title="scramble string" class="md-nav__link">
      scramble string
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="解题步骤" class="md-nav__link">
    解题步骤
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>hit bricks</h1>
                
                <p><font face="思源黑体 CN">
<font face="Times New Roman"></font>
<font face="Consolas"></font>
<font face="Times New Roman"></p>
<blockquote>
<p>We have a grid of 1s and 0s; the 1s in a cell represent bricks.  A brick will not drop if and only if it is directly connected to the top of the grid, or at least one of its (4-way) adjacent bricks will not drop.</br></br>
We will do some erasures sequentially. Each time we want to do the erasure at the location (i, j), the brick (if it exists) on that location will disappear, and then some other bricks may drop because of that erasure.</br></br>
Return an array representing the number of bricks that will drop after each erasure in sequence.
</br></br>
Examples:
<pre><font face="Consolas"><strong>Input</strong>: </br> grid = [[1,0,0,0],[1,1,1,0]]
 hits = [[1,0]]
<strong>Output</strong>: [2]
<strong>Explanation</strong>:If we erase the brick at (1, 0), the brick at (1, 1) and (1, 2) will drop. 
So we should return 2.
</font></pre>
<pre><font face="Consolas"><strong>Input</strong>: </br> grid = [[1,0,0,0],[1,1,0,0]]
 hits = [[1,1],[1,0]]
<strong>Output</strong>: [0, 0]
<strong>Explanation</strong>: When we erase the brick at (1, 0), the brick at (1, 1) has already 
disappeared due to the last move. So each erasure will cause no bricks dropping. Note
that the erased brick (1, 0) will not be counted as a dropped brick.
</font></pre>
Note:
<pre><font face="Consolas">- The number of rows and columns in the grid will be in the range [1, 200].
- The number of erasures will not exceed the area of the grid.
- It is guaranteed that each erasure will be <strong>different</strong> from any other erasure, and located 
  inside the grid.
- An erasure may refer to a location with no brick - if it does, no bricks drop.
</font></pre></br>
(LeetCode 803)
</font></p>
</blockquote>
<h3 id="_1">解题步骤</h3>
<p>&emsp;整体的思路为：把与所有与顶端连接的砖块视作一个集合 $B$；每次 <font face="Consolas">hit</font> 可能从 $B$ 中分离出一个子集，因此逆向思维考虑，颠倒 <font face="Consolas">hit</font> 数组，从末状态填补砖块，若填补使得 $B$ 多了 $n$ 个元素，那么对应的 <font face="Consolas">hit</font> 就一定使得 $B$ 少了 $n$ 个元素。这样就可以利用并查集对集合进行操作。
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nl">Steps:</span>
<span class="mf">1.</span> <span class="n">遍历</span> <span class="n">hits</span><span class="err">，</span><span class="n">把其中对应的砖块清除</span><span class="err">，</span><span class="n">得末状态的</span> <span class="nf">grid</span> <span class="o">(</span><span class="n">注意处理无效的</span> <span class="n">hit</span><span class="o">);</span>
<span class="mf">2.</span> <span class="n">遍历</span> <span class="n">grid</span> <span class="n">的第一行</span><span class="err">，</span><span class="n">把有砖的结点并入顶端集合</span> <span class="n">B</span><span class="o">;</span>
<span class="mf">3.</span> <span class="n">遍历</span> <span class="n">grid</span> <span class="n">剩下的行</span><span class="err">，</span><span class="n">把每块砖与其上下左右的砖合并为一个集合</span> <span class="o">(</span><span class="n">如果有</span><span class="o">);</span>
<span class="mf">4.</span> <span class="n">逆向遍历</span> <span class="n">hits</span><span class="err">，</span><span class="n">填补砖块</span> <span class="o">(</span><span class="n">grid</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]=</span><span class="mi">1</span><span class="o">)</span><span class="err">，</span><span class="n">统计每个操作使集合</span> <span class="n">B</span> <span class="n">添加的结点数</span><span class="err">。</span>
</pre></div>
</td></tr></table></p>
<p>细节部分：
<html> 
<body>
<ul style="margin-top:-14px;margin-bottom:10px;line-height:30px;">
<li style="margin:1px 26px;">使用按数量合并和路径压缩优化；</li>
<li style="margin:1px 26px;">为了方便查询 $B$ 中元素数目，让此集合的根节点恒为结点 $r$，但需要注意当被合并的两个结点有 $r$ 时，要忽略按数量合并；</li>
<li style="margin:1px 26px;">注意处理无效 <font face="Consolas">hit</font>；注意填补的砖块为顶部砖块的情况；</li>
</ul>
</body>
</html></p>
<details class="note"><summary>Code</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">struct</span> <span class="n">UFSet</span> <span class="p">{</span>

    <span class="kt">int</span> <span class="o">*</span><span class="n">nodes</span><span class="p">,</span> <span class="o">*</span><span class="n">rank</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">ROOF</span><span class="p">;</span>

    <span class="n">UFSet</span> <span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
        <span class="n">rank</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
        <span class="n">ROOF</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
            <span class="n">rank</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">find</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">nodes</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="o">?</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">x</span><span class="p">]));</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">merge</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">rx</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">ry</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">rx</span> <span class="o">==</span> <span class="n">ry</span><span class="p">)</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ry</span> <span class="o">!=</span> <span class="n">ROOF</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">rx</span> <span class="o">==</span> <span class="n">ROOF</span> <span class="o">||</span> <span class="n">rank</span><span class="p">[</span><span class="n">rx</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">rank</span><span class="p">[</span><span class="n">ry</span><span class="p">]))</span> <span class="p">{</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">ry</span><span class="p">]</span> <span class="o">=</span> <span class="n">rx</span><span class="p">;</span>
            <span class="n">rank</span><span class="p">[</span><span class="n">rx</span><span class="p">]</span> <span class="o">+=</span> <span class="n">rank</span><span class="p">[</span><span class="n">ry</span><span class="p">];</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">rx</span><span class="p">]</span> <span class="o">=</span> <span class="n">ry</span><span class="p">;</span>
            <span class="n">rank</span><span class="p">[</span><span class="n">ry</span><span class="p">]</span> <span class="o">+=</span> <span class="n">rank</span><span class="p">[</span><span class="n">rx</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>




<span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>

    <span class="k">const</span> <span class="kt">int</span> <span class="kt">DIR</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{{</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}};</span>

    <span class="k">public</span><span class="o">:</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">hitBricks</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">grid</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">hits</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">size1</span> <span class="o">=</span> <span class="n">grid</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">size2</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
            <span class="n">UFSet</span> <span class="nf">uset</span><span class="p">(</span><span class="n">size1</span> <span class="o">*</span> <span class="n">size2</span><span class="p">);</span>

            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">hits</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">hits</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hits</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">hits</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// mark invalid hit</span>
                <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size2</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> 
                <span class="k">if</span> <span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> 
                    <span class="n">uset</span><span class="p">.</span><span class="n">merge</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">uset</span><span class="p">.</span><span class="n">ROOF</span><span class="p">);</span>

            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size1</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">size2</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">extend</span><span class="p">(</span><span class="n">uset</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">size1</span><span class="p">,</span> <span class="n">size2</span><span class="p">,</span> <span class="n">grid</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">res</span><span class="p">(</span><span class="n">hits</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">hits</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">hits</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hits</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// invalid hit</span>
                    <span class="k">continue</span><span class="p">;</span>
                <span class="kt">int</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">uset</span><span class="p">.</span><span class="n">rank</span><span class="p">[</span><span class="n">uset</span><span class="p">.</span><span class="n">ROOF</span><span class="p">];</span> 
                <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">uset</span><span class="p">.</span><span class="n">merge</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">uset</span><span class="p">.</span><span class="n">ROOF</span><span class="p">);</span>
                <span class="n">extend</span><span class="p">(</span><span class="n">uset</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">size1</span><span class="p">,</span> <span class="n">size2</span><span class="p">,</span> <span class="n">grid</span><span class="p">);</span>
                <span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">uset</span><span class="p">.</span><span class="n">rank</span><span class="p">[</span><span class="n">uset</span><span class="p">.</span><span class="n">ROOF</span><span class="p">]</span> <span class="o">-</span> <span class="n">pre</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                <span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">t</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">t</span><span class="p">;</span> <span class="c1">// 0: adding 0 or 1</span>
                <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// padding</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">void</span> <span class="n">extend</span><span class="p">(</span><span class="n">UFSet</span> <span class="n">u</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ei</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ej</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">grid</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">dir</span> <span class="p">:</span> <span class="kt">DIR</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">int</span> <span class="n">ni</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">dir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">nj</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="n">dir</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">ni</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">ni</span> <span class="o">&lt;</span> <span class="n">ei</span> <span class="o">&amp;&amp;</span> <span class="n">nj</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">nj</span> <span class="o">&lt;</span> <span class="n">ej</span> <span class="o">&amp;&amp;</span> <span class="n">grid</span><span class="p">[</span><span class="n">ni</span><span class="p">][</span><span class="n">nj</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">u</span><span class="p">.</span><span class="n">merge</span><span class="p">(</span><span class="n">ej</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">,</span> <span class="n">ej</span> <span class="o">*</span> <span class="n">ni</span> <span class="o">+</span> <span class="n">nj</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</td></tr></table>

</details>
<p></font></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../1/" title="longest consec seq" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                longest consec seq
              </span>
            </div>
          </a>
        
        
          <a href="../../dp/editdistance/" title="edit distance" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                edit distance
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="../../../js/katex.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>